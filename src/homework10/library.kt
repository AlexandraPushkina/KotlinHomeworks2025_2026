package homework10

// –ö–ª–∞—Å—Å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö - https://metanit.com/kotlin/tutorial/4.12.php
data class Book(val title: String, val author: String)

// –ù–∞–±–æ—Ä —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å.
// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Å–≤–æ–π—Å—Ç–≤ –∏ —Ñ—É–Ω–∫—Ü–∏–π,
// –∞ —Ç–∞–∫–∂–µ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∏—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. - https://metanit.com/kotlin/tutorial/4.8.php
//
//  –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —É–º–µ–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∫–Ω–∏–≥–∏ (–¥–ª—è –ê–¥–º–∏–Ω–æ–≤)
interface BookAdder {
    fun addBook(book: Book)
}

// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —É–º–µ–µ—Ç –±—Ä–∞—Ç—å –∫–Ω–∏–≥–∏ (–¥–ª—è –ß–∏—Ç–∞—Ç–µ–ª–µ–π)
interface BookBorrower {
    fun borrowBook(book: Book)
}

// ----------------------------------------------------------------------

// –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –∫–Ω–∏–≥–∏
class LibraryShelver : BookAdder {
    override fun addBook(book: Book) {  // –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏, —É–∫–∞–∑–∞–Ω–Ω–æ–π –µ—â—ë –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
        println("üìö [–°–ö–õ–ê–î] –ö–Ω–∏–≥–∞ '${book.title}' –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –∫–∞—Ç–∞–ª–æ–≥.")
    }
}

// –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –±—Ä–∞—Ç—å –∫–Ω–∏–≥–∏
class LibraryClient : BookBorrower {
    override fun borrowBook(book: Book) {
        println("üìñ [–í–´–î–ê–ß–ê] –í—ã –≤–∑—è–ª–∏ –ø–æ—á–∏—Ç–∞—Ç—å –∫–Ω–∏–≥—É '${book.title}'.")
    }
}

// ----------------------------------------------------------------------

// –ö–ª–∞—Å—Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç BookAdder.
// –û–Ω –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∫–Ω–∏–≥–∏. –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è implementation –û–ë–Ø–ó–ê–ù–ê
// —Ö—Ä–∞–Ω–∏—Ç—å –æ–±—ä–µ–∫—Ç –ª—é–±–æ–≥–æ –∫–ª–∞—Å—Å–∞, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å BookAdder,
// –∫–æ—Ç–æ—Ä–æ–º—É –º—ã –¥–µ–ª–µ–≥–∏—Ä—É–µ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∫–∞–∫–∏—Ö-–ª–∏–±–æ –º–µ—Ç–æ–¥–æ–≤ —á–µ—Ä–µ–∑ by
class Admin(implementation: BookAdder) : BookAdder by implementation

// –ß–∏—Ç–∞—Ç–µ–ª—å "–¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç" –≤–∑—è—Ç–∏–µ –∫–Ω–∏–≥ –æ–±—ä–µ–∫—Ç—É implementation
class Reader(implementation: BookBorrower) : BookBorrower by implementation

// ----------------------------------------------------------------------

fun main() {
    // –°–æ–∑–¥–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ implementation, –∫–æ—Ç–æ—Ä—ã–µ —è–≤–ª—è—é—Ç—Å—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ –∫–ª–∞—Å—Å–æ–≤
    // LibraryShelver/LibraryClient, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª–∏–∑—É—é—Ç BookAdder/BookBorrower
    val shelverLogic = LibraryShelver()
    val clientLogic = LibraryClient()

    // –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    val adminIvan = Admin(shelverLogic)
    val readerDima = Reader(clientLogic)

    val book1 = Book("Kotlin –≤ –¥–µ–π—Å—Ç–≤–∏–∏", "–î–º–∏—Ç—Ä–∏–π –ñ–µ–º–µ—Ä–æ–≤")
    val book2 = Book("–í–æ–π–Ω–∞ –∏ –º–∏—Ä", "–õ–µ–≤ –¢–æ–ª—Å—Ç–æ–π")

    println("--- –î–µ–π—Å—Ç–≤–∏—è –ê–¥–º–∏–Ω–∞ ---")
    adminIvan.addBook(book1) // –í—ã–∑–æ–≤ –ø–µ—Ä–µ–π–¥–µ—Ç –≤ LibraryShelver

    println("\n--- –î–µ–π—Å—Ç–≤–∏—è –ß–∏—Ç–∞—Ç–µ–ª—è ---")
    readerDima.borrowBook(book2) // –í—ã–∑–æ–≤ –ø–µ—Ä–µ–π–¥–µ—Ç –≤ LibraryClient
}

